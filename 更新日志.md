# 📋 应用更新日志

## 🎉 v1.1.0 - 重大更新 (2025-08-10)

### ✅ 修复的关键问题

1. **bruceR包冲突完全解决**
   - ❌ 原错误：`Error in abs(z) : non-numeric argument to mathematical function`
   - ✅ 解决：移除直接加载bruceR，改为检查可用性
   - 🎯 结果：应用启动不再出错

2. **Stability函数参数错误修复**
   - ❌ 原错误：`unused argument (nBootstrap = bootstrap_n)`
   - ✅ 解决：使用bootnet包替代quickNet的Stability函数
   - 🎯 结果：稳定性分析功能正常

3. **showNotification参数错误**
   - ❌ 原错误：`'arg' should be one of "default", "message", "warning", "error"`
   - ✅ 解决：规范所有notification的type参数
   - 🎯 结果：错误提示正常显示

### 🆕 新增核心功能

#### 1. **独立的稳定性分析版块** ⭐
- 📊 专门的"稳定性分析"标签页
- 🔧 可选择边稳定性 / 中心性稳定性
- 📈 使用bootnet包进行专业分析
- 📋 详细的稳定性报告和建议

#### 2. **增强的层级选择系统** 🎯
- 🎨 美观的卡片式量表选择界面
- 📝 智能默认配置（AUDIT→汇总层，HRF→条目层）
- 👁️ 实时变量预览功能
- 💡 详细的选项说明（题目数、维度数）

#### 3. **完善的用户体验**
- 🚀 三种启动方式（简单/完整/直接）
- 📖 中英双语使用说明
- 🛡️ 完善的错误处理和提示
- 🎪 友好的界面设计

### 🎯 层级选择功能详解

**智能默认策略：**
- **AUDIT, PHQ, GAD** → 汇总层（总分分析）
- **HRF** → 条目层（详细机制分析）
- **其他量表** → 根据题目数自适应

**灵活搭配示例：**
```
AUDIT量表    → 汇总层 (总分)
HRF量表      → 条目层 (18个题目)
PHQ量表      → 子量表层 (如果有维度)
```

### 📊 应用结构优化

**新的菜单结构：**
1. 📤 数据上传 - 数据导入和质量检查
2. 🕸️ 网络分析 - 核心网络分析功能
3. 📈 稳定性分析 - **新增独立版块**
4. 💾 结果下载 - 结果导出
5. ❓ 使用说明 - 详细帮助文档

### 🔧 技术改进

1. **依赖管理优化**
   - 移除有问题的bruceR直接加载
   - 添加bootnet专业稳定性分析
   - 改进包加载错误处理

2. **代码结构重构**
   - 稳定性分析独立模块化
   - 层级选择逻辑优化
   - 错误处理标准化

3. **性能提升**
   - 减少不必要的包冲突
   - 优化数据处理流程
   - 改进内存使用

### 📱 启动方式

**推荐启动命令：**
```r
source("run_app.R")
```

**快速启动：**
```r
source("启动应用.R") 
```

**直接启动：**
```r
shiny::runApp("app.R")
```

### 🎊 用户体验提升

- ✨ 界面更加美观和专业
- 🔍 变量预览让选择更直观
- 📊 稳定性分析结果更专业
- 💡 智能提示和帮助信息
- 🛡️ 完善的错误处理

---

## 🔄 v1.0.0 - 初始版本

- 基础网络分析功能
- 多层级分析支持
- 量表自动识别
- 数据质量验证

---

**🎯 下一步计划：**
- 网络比较分析功能
- 更多量表支持
- 结果报告模板
- 批量数据处理